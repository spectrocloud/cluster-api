namespace: capi-kubeadm-control-plane-system

namePrefix: capi-kubeadm-control-plane-

commonLabels:
  cluster.x-k8s.io/provider: "control-plane-kubeadm"
#
#resources:
#  - ../../../controlplane/kubeadm/config/default/namespace.yaml

bases:
#  - ../../../controlplane/kubeadm/config/rbac
  - ../../../controlplane/kubeadm/config/manager

patchesStrategicMerge:
  - ../../../controlplane/kubeadm/config/default/manager_image_patch.yaml
  - ../../../controlplane/kubeadm/config/default/manager_pull_policy.yaml
#  - ../../../controlplane/kubeadm/config/default/manager_role_aggregation_patch.yaml
#
patchesJson6902:
  - target:
      group: apps
      kind: Deployment
      name: controller-manager
      namespace: system
      version: v1
    path: patch_service_account.yaml
  - target:
      group: apps
      kind: Deployment
      name: controller-manager
      namespace: system
      version: v1
    path: patch_healthcheck.yaml
#  - target:
#      group: rbac.authorization.k8s.io
#      kind: ClusterRoleBinding
#      name: manager-rolebinding
#      version: v1
#    path: patch_cluster_role_binding_ref.yaml
#  - target:
#      group: rbac.authorization.k8s.io
#      kind: RoleBinding
#      name: leader-election-rolebinding
#      version: v1
#    path: patch_role_binding_ref.yaml
